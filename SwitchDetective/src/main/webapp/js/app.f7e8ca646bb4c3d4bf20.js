webpackJsonp([3],{"7dxT":function(t,e){},GUUL:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},i,!1,function(t){n("Pe99")},null,null).exports,a=n("bOdI"),s=n.n(a),u=n("/ocq"),c={name:"login",data:function(){return{ruleForm:{identity:"",password:""},rules:{identity:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^(?=.*[a-zA-Z])(?=.*\d)[^]{6,11}$/,message:"长度在6到10个字符，必须包含字母和数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?=.*[a-zA-Z])(?=.*\d)[^]{6,11}$/,message:"长度在6到10个字符，必须包含字母和数字",trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(n){if(n){var o=e[t].identity,i=e[t].password;e.$store.dispatch("login",{identity:o,password:i}).then(function(){e.$router.push("/main/identity")}).catch(function(t){console.log(t)})}else console.log("error submit!!")})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"50px"}},[n("el-form-item",{attrs:{label:"账号",prop:"identity"}},[n("el-input",{model:{value:t.ruleForm.identity,callback:function(e){t.$set(t.ruleForm,"identity",e)},expression:"ruleForm.identity"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("登陆")])],1)],1)],1)},staticRenderFns:[]},d=n("VU/8")(c,l,!1,null,null,null).exports,m={name:"navMenu",data:function(){return{activeIndex:"identity",activeIndex2:"",functionMenuShowed:!1,functionButtonIcon:"el-icon-s-unfold",navList:[{path:"/main/identity",title:"识别"},{path:"/main/help",title:"帮助"}]}},watch:{functionMenuShowed:function(t,e){this.functionButtonIcon=!1===t?"el-icon-s-unfold":"el-icon-s-fold"}},methods:{handleSelect:function(t,e){switch(t){case"identity":this.$router.push("/main/identity");break;case"userInfo":this.$router.push("/main/userInfo");break;case"logout":this.$emit("logout")}console.log(t,e)},handleCommand:function(t){switch(console.log(t),t){case"settings":break;case"logout":this.logout()}},logout:function(){var t=this;this.$store.dispatch("logout").then(function(e){t.$router.push("/login")})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mobile-bar"},[n("el-button",{staticClass:"my-button menu-button",attrs:{type:"primary",icon:t.functionButtonIcon},on:{click:function(e){t.functionMenuShowed=!t.functionMenuShowed}}}),t._v(" "),n("el-dropdown",{staticClass:"customer-dropdown",attrs:{trigger:"click"},on:{command:t.handleCommand}},[n("el-button",{staticClass:"my-button customer-button",attrs:{type:"primary",icon:"el-icon-s-custom"}}),t._v(" "),n("el-dropdown-menu",{staticStyle:{position:"absolute",width:"30%"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{icon:"el-icon-setting",command:"settings"}},[t._v("设置")]),t._v(" "),n("el-dropdown-item",{attrs:{icon:"el-icon-error",command:"logout"}},[t._v("退出")])],1)],1)],1),t._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.functionMenuShowed,expression:"functionMenuShowed"}],staticClass:"function-menu"},[n("el-menu",{attrs:{"default-active":"this.$router.path",router:""}},t._l(t.navList,function(e,o){return n("el-menu-item",{key:o,attrs:{index:e.path}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])])}),1)],1)])],1)},staticRenderFns:[]};var p={name:"helloWorld",components:{NavMenu:n("VU/8")(m,f,!1,function(t){n("GUUL"),n("cbAo")},"data-v-cee4d8bc",null).exports},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push("/login")}).catch(function(t){console.log(t)})}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("el-container",[e("div",{staticClass:"header"},[e("NavMenu",{on:{logout:this.logout}})],1),this._v(" "),e("div",{staticClass:"main"},[e("router-view")],1)])],1)},staticRenderFns:[]};var g=n("VU/8")(p,h,!1,function(t){n("7dxT")},"data-v-fafd1a26",null).exports,v=n("//Fk"),w=n.n(v),b=n("NYxO"),y=n("mtWM"),_=n.n(y),S=n("mw3O"),F=n.n(S),I=n("zL8q"),k=n.n(I);function $(t,e){return new w.a(function(n,o){_.a.post(t,e).then(function(t){n(t)}).catch(function(t){o(t),Object(I.Message)({message:"加载失败",type:"error"})})})}_.a.defaults.withCredentials=!0,_.a.defaults.timeout=1e4,_.a.defaults.headers.post["Context-Type"]="application/x-www-form-urlencoded;charset=UTF-8",_.a.defaults.transformRequest=[function(t){return t instanceof FormData?t:t=F.a.stringify(t)}],_.a.interceptors.request.use(function(t){return t},function(t){return w.a.error(t)}),_.a.interceptors.response.use(function(t){return t},function(t){return w.a.reject(t)});o.default.use(b.a);var E=new b.a.Store({state:{user:window.sessionStorage.getItem("user")||"",token:window.sessionStorage.getItem("token")||"",newResult:null},mutations:{SET_TOKEN:function(t,e){t.token=e,window.sessionStorage.setItem("token",e)},SET_USER:function(t,e){t.user=e,window.sessionStorage.setItem("user",e)},LOGOUT:function(t){t.user=null,t.token=null,window.sessionStorage.removeItem("user"),window.sessionStorage.removeItem("token")},SET_NEW_RESULT:function(t,e){t.newResult=e}},actions:{login:function(t,e){return new w.a(function(n,o){var i,r;(i=e.identity,r=e.password,new w.a(function(t,e){var n=new FormData;n.append("identity",i),n.append("password",r),$("/login",n).then(function(e){t(e)}).catch(function(t){e(t)})})).then(function(e){t.commit("SET_USER",e.data.user),t.commit("SET_TOKEN",e.data.token),n()}).catch(function(t){o(t)})})},logout:function(t){return new w.a(function(e,n){t.commit("LOGOUT"),e()})},identity:function(t,e){return new w.a(function(n,o){var i;(i=e.file,new w.a(function(t,e){var n=new FormData;n.append("file",i,i.name),$("/api/web/image/ident/215P",n).then(function(e){t(e)}).catch(function(t){e(t)})})).then(function(o){var i={};i.originImg=e.base64,i.cabinetId=o.data.cabinetId,i.returnImg=o.data.path_Image_Detected,i.dateTime=o.data.dateTime,i.switchs=o.data.result,t.commit("SET_NEW_RESULT",i),n(o)}).catch(function(t){o(t)})})}},getters:{isLoggedIn:function(t){return!!t.token},imgMngrDlgVsbl:function(t){return t.imgMngrDlgVsbl},newResult:function(t){return t.newResult}}}),x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"300px"}},[e("el-steps",{attrs:{direction:"vertical",active:1}},[e("el-step",{attrs:{title:"步骤一"}}),this._v(" "),e("el-step",{attrs:{title:"步骤二"}}),this._v(" "),e("el-step",{attrs:{title:"步骤三"}})],1)],1)},staticRenderFns:[]};var T=n("VU/8")({},x,!1,function(t){n("ie7z")},"data-v-e2655a2e",null).exports;o.default.use(u.a);var U=new u.a({mode:"history",routes:[s()({path:"/",redirect:"/login"},"redirect","/main/identity"),{path:"/login",name:"login",component:d},{path:"/main",name:"main",meta:{requiresAuth:!0},component:g,children:[{path:"identity",name:"identity",component:function(t){return n.e(0).then(function(){return n("NsM9")}.bind(null,n)).catch(n.oe)}},{path:"help",name:"help",component:T},{path:"userInfo",name:"userInfo",component:function(t){return n.e(1).then(function(){return n("yw6p")}.bind(null,n)).catch(n.oe)}}]}]});U.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requiresAuth})?E.getters.isLoggedIn?n():(n("/login"),n()):n()});var M=U;n("tvR6");n("telf"),o.default.config.productionTip=!1,o.default.use(k.a),o.default.prototype.$axios=_.a,new o.default({el:"#app",router:M,store:E,render:function(t){return t(r)}})},Pe99:function(t,e){},cbAo:function(t,e){},ie7z:function(t,e){},telf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("zNUS"),i=n.n(o),r=n("mw3O"),a=n.n(r);i.a.mock("/login",function(t){var e=a.a.parse(t.body);return{user:{identity:e.identity,password:e.password},token:"1234567"}})},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f7e8ca646bb4c3d4bf20.js.map